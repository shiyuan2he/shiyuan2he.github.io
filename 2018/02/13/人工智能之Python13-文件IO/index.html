<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="人工智能之Python13 文件IO"/>




  <meta name="keywords" content="python," />




  <link rel="alternate" href="/atom.xml" title="远观钱途">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.4.x" />



<link rel="canonical" href="http://yoursite.com/2018/02/13/人工智能之Python13-文件IO/"/>


<meta name="description" content="在你编写代码的时候，操作系统为了更快的做出响应，把所有当前的数据都放在内存中，因为内存和cpu数据传输的速度要比在硬盘和cpu之间传输的速度快很多，但不足时一旦机器断点，所有的数据就会丢失，所以此时需要文件存储">
<meta name="keywords" content="python">
<meta property="og:type" content="article">
<meta property="og:title" content="人工智能之Python13 文件IO">
<meta property="og:url" content="http://yoursite.com/2018/02/13/人工智能之Python13-文件IO/index.html">
<meta property="og:site_name" content="远观钱途">
<meta property="og:description" content="在你编写代码的时候，操作系统为了更快的做出响应，把所有当前的数据都放在内存中，因为内存和cpu数据传输的速度要比在硬盘和cpu之间传输的速度快很多，但不足时一旦机器断点，所有的数据就会丢失，所以此时需要文件存储">
<meta property="og:updated_time" content="2018-02-13T01:02:29.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="人工智能之Python13 文件IO">
<meta name="twitter:description" content="在你编写代码的时候，操作系统为了更快的做出响应，把所有当前的数据都放在内存中，因为内存和cpu数据传输的速度要比在硬盘和cpu之间传输的速度快很多，但不足时一旦机器断点，所有的数据就会丢失，所以此时需要文件存储">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.4.x" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />





<script>
  var CONFIG = {
    search: true,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?41fc030db57d5570dd22f78997dc4a7e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




    <title> 人工智能之Python13 文件IO · 远观钱途 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">远观钱途</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
      <a href="/books">
        <li class="mobile-menu-item">
          
          
            Books
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">远观钱途</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              Categories
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              About
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/books">
            
            
              Books
            
          </a>
        </li>
      
      
        <li class="menu-search">
          <form>
            <i class="iconfont icon-search" id="open-search"></i>
            <input type="text" class="search-input" id="search-input" />
            <i class="iconfont icon-close" id="close-search"></i>
          </form>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          人工智能之Python13 文件IO
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018年2月13日
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#文件"><span class="toc-text">文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#打开文件"><span class="toc-text">打开文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#操作文件"><span class="toc-text">操作文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关闭文件"><span class="toc-text">关闭文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件系统"><span class="toc-text">文件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#system"><span class="toc-text">system</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#walk-top"><span class="toc-text">walk(top)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#os-path模块"><span class="toc-text">os.path模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pickle"><span class="toc-text">pickle</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>在你编写代码的时候，操作系统为了更快的做出响应，把所有当前的数据都放在内存中，因为内存和cpu数据传输的速度要比在硬盘和cpu之间传输的速度快很多，但不足时一旦机器断点，所有的数据就会丢失，所以此时需要文件存储<br><a id="more"></a></p>
<h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><h3 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h3><p>Python使用open()方法来打开并返回文件对象：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">open(file, mode=&apos;r&apos;, buffering=None, encoding=None, errors=None, newline=None, closefd=True)</div></pre></td></tr></table></figure></p>
<ol>
<li>file: 传入的文件名,如果只有文件名，不带路径的话，那么Python会在当前文件夹中去找到该文件并打开</li>
<li><p>mode: 指定文件打开模式</p>
<p> 打开模式 | 执行操作<br> —|—<br> r | 以只读方式打开文件（默认）<br> w | 以写入的方式打开文件<br> x | 如果文件已存在，是用这种方式打开会出现异常<br> a | 以写入模式打开文件，如果文件已存在，则在文件默认追加写入<br> b | 以二进制模式打开文件<br> t | 以文本模式打开</p>
<ul>
<li>| 可读写模式<br>U | 通用换行符支持</li>
</ul>
</li>
</ol>
<p>使用open()方法成功打开一个文件之后就得到一个文件对象，拿到这个对象就可以读取或者修改这个文件<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">open(<span class="string">"__init__.py"</span>)</div></pre></td></tr></table></figure></p>
<h3 id="操作文件"><a href="#操作文件" class="headerlink" title="操作文件"></a>操作文件</h3><p>打开文件并取得文件对象之后，就可以利用文件对象的一些方法对文件进行读取或者修改等操作</p>
<pre><code>文件对象的方法 | 执行操作
---|---
close() | 关闭文件
read(size=-1) | 从文件读取size个字符，当未指定size或给定负值的时候，&lt;br/&gt;读取剩余的所有字符串然后作为字符串返回
readline | 从文件中读取一整行字符串
write(str) | 将字符串str写入文件
writelines(seq) | 向文件写入字符串序列seq，seq应该是一个返回字符串的可迭代对象
seek(offset,from) | 在文件中移动文件指针，从from&lt;br/&gt;(0代表文件起始位置，1代表当前位置，2代表文件末尾)偏移offset个字节
tell() | 返回当前在文件中的位置
</code></pre><p>文件的操作不做细分处理，有上面的api足够使用，遇到问题请自行查找官方api接口使用手册</p>
<h3 id="关闭文件"><a href="#关闭文件" class="headerlink" title="关闭文件"></a>关闭文件</h3><p>close()方法用于关闭文件。</p>
<p>Python拥有垃圾回收机制，会在文件对象的引用计数降至零的时候自动关闭文件，所以在python变成里，如果忘记关闭文件并不会造成内存泄漏，但还是尽量在完成写入之后关闭文件</p>
<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>Python对于文件系统的访问，是通过OS（Operate System-操作系统）来实现的。目前市面上的操作系统主要有Windows、Mac OS、Unix、Linux等。</p>
<p>这些系统对于文件系统的访问原理是不一样的，因此你可能就要针对不同的系统来考虑使用哪些文件系统模块，这就导致程序运行环境发生变化，就要去修改大量的代码去解决。所以Python提供OS模块来解决这种情景，开发者可以不需要关心什么<br>操作系统下使用什么模块，OS会帮助我们选择合适的模块</p>
<pre><code>函数名称 | 使用方法
--- | ---
getcwd() | 返回当前工作目录
chdir(path) | 改变工作目录
listdir(path=&apos;.&apos;) | 列举制定目录中的文件名(&apos;.&apos;：表示当前目录，&apos;..&apos;:表示上一级目录)
mkdir(path) | 创建单层目录，如果目录已存在则抛出异常
mkdirs(path) | 递归创建多层目录，如果该目录已存在则抛出异常
remove(path) | 删除文件
rmdir(path) | 删除单层目录，如果该目录非空，则抛出异常
removedirs(path) | 递归删除目录，从子目录到父目录逐层尝试删除，遇到目录非空则抛出异常
rename(old,new) | 将文件old重命名未new
system(command) | 运行系统的shell命令
os.curdir | 当前目录（&quot;.&quot;）
os.pardir | 上一级目录
os.sep  | 输出操作系统指定的路径分隔符（windows为&apos;\\&apos;,Linux为&apos;/&apos;）
os.linesep | 当前系统使用的行终止符（Window下为&apos;\r\n&apos;,Linux下为&apos;\n&apos;）
os.name | 当前使用的操作系统（posix、nt、mac等等）
</code></pre><p>不多做介绍，重点介绍几个特别的方法</p>
<h3 id="system"><a href="#system" class="headerlink" title="system"></a>system</h3><p>几乎每个操作系统都会提供一些小工具，system()函数用于使用这些小工具</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os</div><div class="line">os.system(<span class="string">'calc'</span>) <span class="comment"># 获取系统自带的计算器</span></div></pre></td></tr></table></figure>
<h3 id="walk-top"><a href="#walk-top" class="headerlink" title="walk(top)"></a>walk(top)</h3><p>walk是一个很有用的函数，它的作用是遍历top参数指定目录下的所有子目录，并将结果返回一个三元组（路径,[包含目录],[包含文件]）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="comment"># 输出当前文件所在路径的上一级目录所包含的文件夹和文件</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">os_walk</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> os.walk(os.pardir) :</div><div class="line">        print(i)</div><div class="line">os_walk()</div></pre></td></tr></table></figure>
<h3 id="os-path模块"><a href="#os-path模块" class="headerlink" title="os.path模块"></a>os.path模块</h3><p>另一个强大的模块是os.path模块，它可以完成一些针对路径名的操作。</p>
<pre><code>函数名 | 使用方法
---|---
basename(path) | 去掉目录路径，单独返回文件名
dirname | 去掉文件名，单独返回目录路径
join(path[,path2[,path3]]) | 将path、path2、path3各部分组合成一个路径名
split(path) | 分割文件名与路径，返回(f_path,f_name)元组
splitext(path) | 分离文件名与扩展名，返回(f_name,f_extension)元组
getsize(file) | 返回指定文件的尺寸，单位是字节
getatime(file) | 返回指定文件最近的访问时间（浮点型秒数，可用time模块的gmtime()或者localtime()函数换算）
getctime(file) | 返回指定文件的创建时间
getmtime(file) | 返回指定文件最新的修改时间
exists(path) | 判断指定路径或文件是否存在
isabs(path) | 判断指定路径是否为绝对路径
isdir(path) | 判断指定路径是否是文件夹
isfile(path) | 判断指定路径是否是文件
islink(path) | 判断指定路径是否存在是一个符号链接
ismount(path) | 判断指定路径是否存在且是否是一个挂载点
samefile(path1,path2) | 判断path1和path2两个路径是否指向同一个文件
</code></pre><h2 id="pickle"><a href="#pickle" class="headerlink" title="pickle"></a>pickle</h2><p>之前的文件保存一直操作的是字符串，读写很简单。但是当我们操作更复杂一点的数据对象：列表，字典，类的实例等时普通的文本操作就会变得不知所措。<br>如果将其转化成字符串再保存进文件，可当读取的时候也是字符串，不是list，字典或者类的实例，因此，Python提供了一个标准模块，使用这个模块就可以很容易的把这些<br>列表，字典等复杂数据类型写进文件。这个模块就是pickle(泡菜)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pickle</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="comment">## 写入my_list.pkl文件</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_pickle</span><span class="params">()</span>:</span></div><div class="line">    list01 = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">'test'</span>, <span class="string">'我爱你'</span>]</div><div class="line">    pickle_file = open(os.curdir + <span class="string">"my_list.pkl"</span>, <span class="string">"wb"</span>)</div><div class="line">    pickle.dump(list01, pickle_file)</div><div class="line">    pickle_file.close()</div><div class="line"></div><div class="line">test_pickle()</div></pre></td></tr></table></figure>
<p>执行完之后会在当前路径生成my_list.pkl文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pickle</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="comment">## 读取</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_pickle02</span><span class="params">()</span>:</span></div><div class="line">    pickle_file = open(os.curdir + <span class="string">"my_list.pkl"</span>, <span class="string">"rb"</span>)</div><div class="line">    my_list = pickle.load(pickle_file)</div><div class="line">    print(my_list)</div><div class="line"></div><div class="line">test_pickle02()</div><div class="line"><span class="comment">## 输出是</span></div><div class="line"></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="string">'test'</span>, <span class="string">'我爱你'</span>]</div></pre></td></tr></table></figure>
<p>执行完之后会在当前路径生成my_list.pkl文件</p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>作者: </span>
      <span>天道悲鸣</span>
    </p>
    <p class="copyright-item">
      <span>来源: </span>
      <a href="http://yoursite.com">http://yoursite.com</a>
    </p>
    <p class="copyright-item">
      <span>链接: </span>
      <a href="http://yoursite.com/2018/02/13/人工智能之Python13-文件IO/">http://yoursite.com/2018/02/13/人工智能之Python13-文件IO/</a>
    </p>

    <p class="copyright-item lincese">
      
      本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
    </p>
  </div>



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden />
    <label class="reward-button" for="reward">赞赏支持</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/uploads/WechatPay.jpeg" title="wechat">
        </label>
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="/uploads/AliPay.jpeg" title="alipay">
        </label>
      
    </div>
  </div>

    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/python/">python</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2018/02/13/人工智能之Python12-递归/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">人工智能之Python12 递归</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2018/02/13/人工智能之Python14-异常处理/">
        <span class="next-text nav-default">人工智能之Python14 异常处理</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:shiyuan4work@sina.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/shiyuan2he" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2017 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">天道悲鸣</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  
  




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.4.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.4.x"></script>

    
  <script type="text/html" id="search-result">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">
          <a href="$url$" class="post-link">
            $title$
          </a>
        </h1>
      </header>
      <div class="post-content">
        $content$
        <div class="read-more">
          <a href="$url$" class="read-more-link">
            Read more..
          </a>
        </div>
      </div>
    </article>
  </script>
  <script type="text/html" id="no-search-result">
    <div class="no-result">
      <h2>No result found!</h2>
    </div>
  </script>
  <script type="text/javascript" src="/js/src/search.js?v=2.4.x"></script>

  </body>
</html>
